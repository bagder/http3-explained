# Alt-svc

Alternate service (Alt-svc:) ヘッダとそれに対応する `ALT-SVC` HTTP/2 フレームは、
QUIC や HTTP/3 用に設計されたわけではありません。これらはサーバがクライアントに対して
*「ちなみに私は同じサービスをこのホスト、プロトコル、ポートでも実行していますよ」*
と伝えるための、既に設計・作成されているメカニズムの一部です。
詳細は [RFC 7838](https://tools.ietf.org/html/rfc7838) を参照してください。

このような Alt-svc 応答を受け取ったクライアントは、クライアントが代替プロトコルを
サポートしておりかつそれを希望する場合に、指定されたプロトコルで当該ホストへ
バックグラウンドで並行接続をし、その接続が成功した場合には最初のコネクションの
代わりにそのプロトコルへと切り替えを行います。

最初のコネクションが HTTP/2、または HTTP/1 を使用している場合、サーバはクライアントに対して
HTTP/3 で再接続可能であると伝えることができます。それは同じホストに対してかもしれませんし、
そのオリジンを提供することが可能な別のホストかもしれません。
こうした Alt-svc 応答で与えられる情報には、ある特定の期間だけクライアントが提案された
代替プロトコルを使用して後続のコネクションおよび要求を代替ホストに直接指示できるよう、有効期限が設けられます。

## Example

HTTP サーバはレスポンスヘッダに `Alt-Svc:` を含みます:

    Alt-Svc: h3=":50781"

これは HTTP/3 がこのレスポンスをを得るために使われた同じホスト名の UDP ポート 50781 番
で利用可能であることを示します。

クライアントはその宛先ホストに対して QUIC コネクションの確立を試みることが可能で、成功した場合は
最初の HTTP バージョンではなく、確立されたその代替接続でオリジンと通信を続けることができます。
