# HTTP/2 と比較した HTTP/3

HTTP/3 は、自身でストリームを処理するトランスポートプロトコルである QUIC に合わせた設計になっています。

HTTP/2 は TCP を前提とした設計のため、HTTP レイヤーでストリームを処理します。

## 類似点

この2つのプロトコルは、クライアントに対して事実上同じ機能を提供します。

- どちらのプロトコルも、ストリームを提供します。

- どちらのプロトコルも、server push のサポートを提供します。

- どちらのプロトコルもヘッダー圧縮が提供されます、QPACK と HPACK も設計上似ています。

- どちらのプロトコルも、1つの接続でストリームによる多重化が提供されます。

- どちらのプロトコルも、ストリームの優先順位付けを行います。

## 相違点

差異は主に詳細にあり、HTTP/3 が QUIC を利用することによるものです。

- TCP Fast Open と TLS では、一般的にあまりデータ量を送信せず、しばしば問題を引き起こす一方で、
  HTTP/3 は QUIC の 0-RTT ハンドシェイクのおかげで、early data のサポートがあります。

- HTTP/3 は QUIC のおかげで TCP と TLS の組み合わせより高速なハンドシェイクを実現します。

- HTTP/3 では全て暗号化された安全な通信です。
  HTTP/2 は、インターネット上においては稀なことであるにせよ、 HTTPS なしで実装することも可能です。

- HTTP/2 では TLS ハンドシェイクを ALPN 拡張 を用いて、直接ネゴシエーションが可能です。
  一方で、HTTP/3 は 事実上、QUIC 上で動くため、クライアントにこの内容を知らせるため
  `Alt-Svc:` ヘッダーレスポンス が最初に必要です。
